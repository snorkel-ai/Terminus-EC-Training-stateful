-- Compact batch 28/29: rows 1351-1400

INSERT INTO task_inspiration (category, subcategory, subsubcategory, description, difficulty, tags) VALUES
('System Setup & Configuration', 'Operating System Configuration', 'Environment Variables & Profiles', 'Install direnv and integrate it system-wide for both bash and zsh via /etc/profile.d so it loads automatically for all users. Create /srv/project with a .envrc that exports APP_ENV=staging, prepends /opt/tools/bin to PATH, sets PYTHONPATH, and verify as user dev that entering/leaving the directory auto-loads/unloads these variables.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'Process & Resource Management', 'Create a cgroups v2-backed systemd slice (tb-limited.slice) enforcing CPUQuota and MemoryMax, run a resource-hungry service (e.g., stress-ng via tb-hog.service) within it, and schedule it with a systemd timer that adds a randomized delay. Verify enforcement by observing throttling/OOM-kill behavior, automatic restarts, and corroborating logs via journald and systemd-cgtop.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'Process & Resource Management', 'Create a dedicated cgroup v2 slice (batch.slice) and a templated systemd service (batch@.service) that runs a CPU/memory-intensive script under strict limits (CPUAffinity to specific cores, CPUQuota=25%, MemoryMax=150M, TasksMax=32) with automatic restart on OOM. Trigger it via a systemd timer every 2 minutes and verify via cpu.stat/memory.events that throttling and OOM handling occurred, with logs persisted to /var/log/batch/.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'Process & Resource Management', 'Create a sandboxed systemd service and timer that runs a worker script under cgroups v2 with CPUQuota=40%, MemoryMax=200M, CPUAffinity pinned to one core, TasksMax, and hardening options (NoNewPrivileges, PrivateTmp, ProtectSystem=strict), logging to both the journal and /var/log/worker.log. Enable and verify the limits by starting the unit, inspecting cgroup metrics, and demonstrating the timer’s persistence and randomized delay.', 'hard', ARRAY['logging']),
('System Setup & Configuration', 'Operating System Configuration', 'Process & Resource Management', 'Create a systemd slice and templated service constrained by cgroup v2 (e.g., CPUQuota and MemoryMax) and trigger it via a Persistent=true systemd timer to run periodic batch jobs. Verify scheduled execution, enforced resource limits, automatic restart-on-failure behavior, and logs accessible with journalctl.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'Process & Resource Management', 'Define and enable a custom systemd slice (bench.slice) with cgroup v2 limits (CPUQuota=40%, MemoryMax=512M) and a service (bench-workload.service) bound to it that runs a CPU/memory stress script with Restart=always and hardened sandboxing. Add a systemd timer to schedule the workload every 5 minutes, log output to /var/log/bench-workload.log, and verify enforcement by inspecting cgroup stats for CPU throttling and memory limits.', 'hard', NULL),
('System Setup & Configuration', 'Operating System Configuration', 'System Parameters & Kernel Settings', 'Configure persistent kernel core dump handling by setting kernel.core_pattern to pipe to a custom collector script that stores and compresses cores under /var/lib/cores with metadata. Create and enable a systemd service that runs a small crashing test binary with LimitCORE=infinity to verify capture and persistence across reboots.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'System Parameters & Kernel Settings', 'Configure system-wide core dump handling by setting kernel.core_pattern to pipe crashes into a custom /usr/local/bin/core_collector that compresses dumps under /var/cores with metadata, and disable systemd-coredump while enforcing fs.suid_dumpable=0. Persist ulimit core=0 for all users except a dedicated systemd service that overrides to unlimited, then verify by crashing a test binary from both contexts and confirming only the service produces a compressed core in /var/cores.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'System Parameters & Kernel Settings', 'Enable compressed swap-on-RAM (zram) with a persistent swap device sized to 50% of system memory, tune vm.swappiness=80 and vm.vfs_cache_pressure=200 via /etc/sysctl.d, and disable Transparent Huge Pages at boot. Verify the settings persist and that zram is active in /proc/swaps and THP shows "never" in sysfs.', NULL, NULL),
('System Setup & Configuration', 'Operating System Configuration', 'System Parameters & Kernel Settings', 'Persistently harden and tune the kernel by setting sysctl values via /etc/sysctl.d (disable unprivileged user namespaces and BPF, restrict dmesg, enable TCP syncookies, increase somaxconn and inotify limits) and raise per-user nofile/nproc ulimits via /etc/security/limits.d. Verify live and persistent effect with sysctl and ulimit checks after reloading settings and starting a fresh shell.', 'hard', ARRAY['security']),
('System Setup & Configuration', 'Service & Daemon Management', 'Log Monitoring & Service Debugging', 'Create a socket-activated systemd service (myapp.socket/myapp.service) for a simple HTTP server that initially fails to start, enable persistent journald storage, and use journalctl to pinpoint the root causes (bad WorkingDirectory and missing RuntimeDirectory). Correct the unit (User/Group, WorkingDirectory, RuntimeDirectory, LimitNOFILE), set journald rate limiting, and verify the socket serves 127.0.0.1:8080 with clean, non-repeating logs.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Log Monitoring & Service Debugging', 'Create a systemd service and timer that runs a backup script every minute, where the initial run fails due to a missing WorkingDirectory and permission errors. Use journalctl to diagnose the failures, fix the unit (User/Group, WorkingDirectory/RuntimeDirectory, ExecStart), and verify via logs that subsequent timer invocations complete successfully with stdout/stderr captured in journald.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Log Monitoring & Service Debugging', 'Debug a crash-looping systemd service ''img-resizer.service'' by inspecting journald and its app logs to pinpoint failures caused by PrivateTmp and a missing RuntimeDirectory (socket at /tmp/img.sock and unwritable log path). Fix the unit to use /run/img-resizer via RuntimeDirectory=, correct User/Group and dependencies, reload systemd, and confirm the service stays active and the UNIX socket handles a test request.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Log Monitoring & Service Debugging', 'Debug a systemd unit ''imgsvc.service'' that crash-loops on startup: journald reveals ''listen tcp :80: bind: permission denied'' and write failures due to DynamicUser=yes. Update the unit to grant AmbientCapabilities=CAP_NET_BIND_SERVICE and define a RuntimeDirectory with correct permissions, then verify it binds to 0.0.0.0:80 and runs cleanly with logs visible in journald.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Log Monitoring & Service Debugging', 'Investigate a failing systemd unit (myapp.service) for a Gunicorn-backed Python web app that repeatedly restarts; use journalctl and the app’s error logs to identify an invalid WorkingDirectory and a missing EnvironmentFile. Fix the unit via a systemd drop-in (correct ExecStart/WorkingDirectory, EnvironmentFile, User, Restart policy), enable persistent journald with size limits, then verify with curl that the service stays active and logs show a 200 response without rate-limit warnings.', NULL, ARRAY['python', 'web']),
('System Setup & Configuration', 'Service & Daemon Management', 'Service Installation & Setup', 'Install Prometheus and node_exporter as system services, configure Prometheus to scrape node_exporter and itself on localhost, and ensure both start on boot. Verify successful scraping by querying Prometheus’s HTTP API for the up metric and confirm it returns 1 for both targets.', NULL, ARRAY['api']),
('System Setup & Configuration', 'Service & Daemon Management', 'Service Installation & Setup', 'Install Prometheus and node_exporter as systemd services, configure Prometheus (/etc/prometheus/prometheus.yml) to scrape node_exporter on localhost:9100 every 5s with a custom external_label and 1h retention. Enable and start both services, then verify the target is UP via the Prometheus HTTP API and that metrics are served at http://localhost:9100/metrics.', NULL, ARRAY['api']),
('System Setup & Configuration', 'Service & Daemon Management', 'Service Installation & Setup', 'Install and configure MinIO as an S3-compatible object storage service with a self-signed TLS certificate, listening on 0.0.0.0:9443 and managed via systemd. Create an admin user and a test bucket with a read-only policy, configure AWS CLI to use the endpoint, and verify by uploading and retrieving a file.', NULL, ARRAY['aws']),
('System Setup & Configuration', 'Service & Daemon Management', 'Service Installation & Setup', 'Install and configure OpenLDAP (slapd) with a base DN (dc=tb,dc=local), enabling StartTLS on 389 and LDAPS on 636 with a self-signed certificate, plus the memberOf/refint overlays and proper indexing. Create an OU and a test user with a salted hashed password, run slapd in the background, and verify authenticated ldapsearch/ldapmodify operations over TLS return expected entries.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Service Installation & Setup', 'Install and configure the Mosquitto MQTT broker with plaintext (1883) and TLS (8883) listeners, password-based authentication, and persistence managed via systemd. Generate a self-signed certificate, enable the service on boot, and verify pub/sub functionality using mosquitto_pub and mosquitto_sub over both transports.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Systemd & Init Configuration', 'Create a socket-activated, templated systemd service (echo@.service) that spawns per-connection Python echo handlers from echo.socket on 127.0.0.1:9999 (Accept=yes), running under DynamicUser with hardening and network-online dependencies. Add a non-root user-level timer (with lingering enabled) that health-checks the socket every minute and configure persistent journald logs to verify on-demand startup and successful checks.', 'hard', ARRAY['python']),
('System Setup & Configuration', 'Service & Daemon Management', 'Systemd & Init Configuration', 'Create a socket-activated, templated systemd service (echo@.socket/echo@.service) for a tiny Python HTTP echo server that runs as an unprivileged user and starts on-demand when connections arrive, with instances bound to ports via the instance name. Enable sockets for ports 8081 and 9091, ensure After=network-online.target with basic hardening, and verify curl requests trigger the service and return a response while logs appear in journald.', 'hard', ARRAY['python']),
('System Setup & Configuration', 'Service & Daemon Management', 'Systemd & Init Configuration', 'Create a socket-activated, templated systemd service that spawns per-connection instances of a tiny Python HTTP responder via Accept=yes on port 8080 using the inherited socket (fd 3). Verify on-demand activation with curl, that each instance exits after one request, and enable the socket to start at boot.', NULL, ARRAY['python']),
('System Setup & Configuration', 'Service & Daemon Management', 'Systemd & Init Configuration', 'Implement a socket-activated, per-connection systemd service (using a .socket and a templated .service) that runs a minimal HTTP echo server bound to 127.0.0.1:8085 with DynamicUser and strict sandboxing. Validate that a curl request triggers on-demand startup, serves a response, then the service stops after an idle timeout while the socket remains listening.', NULL, NULL),
('System Setup & Configuration', 'Service & Daemon Management', 'Systemd & Init Configuration', 'Implement a systemd socket-activated, per-connection echo service: echo.socket listens on 127.0.0.1:12345 with Accept=yes, and echo@.service (Type=simple, StandardInput/Output=socket) runs /bin/cat with DynamicUser and strict sandboxing. Enable the socket, verify with nc 127.0.0.1 12345 that input is echoed, and confirm each connection spawns and exits a separate instance recorded in the journal.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Dependency Verification & Repair', 'Diagnose and repair a system with corrupted shared libraries and an interrupted apt/dpkg transaction by verifying package integrity with debsums and fixing the broken package state. Reinstall only the affected packages, refresh the dynamic linker cache, and verify the repair with a successful HTTPS curl and a Python ssl import.', NULL, ARRAY['python']),
('System Setup & Configuration', 'Software & Package Management', 'Dependency Verification & Repair', 'Diagnose and repair missing 32-bit runtime libraries for a provided 32-bit ELF binary (/app/bin/hello32) by enabling i386 multiarch on Debian/Ubuntu, installing required :i386 packages (e.g., libc6, libstdc++6, libgcc-s1), and refreshing the linker cache. Prove the fix by ensuring ldd shows no "not found" entries, the binary executes successfully, and saving the resolved ldd map to /app/output/ldd-hello32.txt.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Dependency Verification & Repair', 'In a Debian-based container with mixed-release APT sources and a corrupted dpkg status (half-installed/half-configured packages), restore the package manager to a healthy, consistent ''stable'' state by fixing the dpkg database, correcting sources, resolving pinned/held packages, and repairing dependency conflicts. Validate by achieving a clean apt-get check/apt-get -f install run and successfully using curl to fetch an HTTPS URL with system OpenSSL.', NULL, ARRAY['container', 'database']),
('System Setup & Configuration', 'Software & Package Management', 'Dependency Verification & Repair', 'Recover a Debian/Ubuntu system from an interrupted apt upgrade that left dpkg in a broken state by repairing the package database, clearing partial installs, and resolving held/unmet dependencies with correct version pinning. Validate the fix by installing and running a provided CLI that initially fails due to missing libssl/libffi SONAMEs, ensuring compatibility libraries are installed properly without manual symlinks.', NULL, ARRAY['database']),
('System Setup & Configuration', 'Software & Package Management', 'Dependency Verification & Repair', 'Resolve a C++ runtime symbol version mismatch by installing a compatible libstdc++ (e.g., GLIBCXX_3.4.26+) on a Debian-based system where a precompiled binary fails with ''version GLIBCXX_3.4.26 not found''. Configure apt pinning/backports to upgrade only libstdc++6 and required dependencies without a full dist-upgrade, then validate the binary runs and ldd shows no unresolved symbols.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Package Installation & Removal', 'Configure APT pinning to add Debian testing with low priority, then install only neovim (>=0.9) from testing while keeping the rest of the system on stable, removing any vim* packages and setting nvim as the default vi/editor via update-alternatives. Place neovim on hold to prevent unintended upgrades and verify pinning/hold status with apt-cache policy and apt-mark.', NULL, ARRAY['testing', 'rest']),
('System Setup & Configuration', 'Software & Package Management', 'Package Installation & Removal', 'Create a GPG-signed local APT repository served over HTTP, build and publish a hello-terminal-bench .deb to it, add the repository to sources.list with its key, then install the package using apt. Finally, remove and purge the package and verify its maintainer scripts executed by logging to a known file.', NULL, ARRAY['logging']),
('System Setup & Configuration', 'Software & Package Management', 'Package Installation & Removal', 'Create a signed local APT repository under /srv/apt (using apt-ftparchive or reprepro), add it to sources.list.d with its GPG key, and install a provided custom .deb from it. Then remove the package, revoke the repo by removing the key and source, run apt clean/update, and verify the package is no longer available.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Package Installation & Removal', 'Enable multiarch on a Debian/Ubuntu system to install side-by-side i386 and amd64 variants of selected libraries (e.g., libssl and zlib), pin the exact versions, and validate via dpkg-query that both architectures are present. Then purge the i386 variants, remove the version holds, disable multiarch, and confirm apt autoremove leaves no residual dependencies.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Package Installation & Removal', 'Set up a signed local APT repository hosting a dummy hello-bench .deb and configure apt to trust and prefer it via pinning. Install hello-bench from the local repo, then remove and purge it, verifying with apt-cache policy and dpkg status that the correct source and state transitions occurred.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Repository Configuration', 'Build and serve a local APT repository containing a trivial hello-world .deb; generate a GPG key, sign the Release, and add a deb822 .sources entry using signed-by in /usr/share/keyrings. Pin priorities so only hello-world resolves from the local repo while all other packages come from the default sources, and verify via apt-cache policy and installation.', NULL, ARRAY['installation']),
('System Setup & Configuration', 'Software & Package Management', 'Repository Configuration', 'Create a custom DNF/YUM repository from a local directory, generate a new GPG key, sign both RPMs and repodata, and publish it via nginx. Add the repo with repo_gpgcheck=1, gpgcheck=1, and a dedicated keyring, set repo priority to prefer only one named package from it, then verify installs succeed only when signatures are valid and the unsigned variant is rejected.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Repository Configuration', 'Create a local APT repository at /repo, serve it over HTTPS via nginx, and sign its Release/InRelease files with a newly generated GPG key; publish and index a minimal hello-world .deb. Add the repo to apt sources using signed-by, confirm apt update and package installation succeed, then demonstrate that altering the signed metadata causes apt to refuse the repo until the correct signature/key is restored.', NULL, ARRAY['installation']),
('System Setup & Configuration', 'Software & Package Management', 'Repository Configuration', 'Create a locally hosted, GPG-signed APT repository (served on localhost) containing a provided .deb, add it to sources using the signed-by option with a keyring in /usr/share/keyrings, and install the package from it. Demonstrate that apt rejects the repo before the key is configured and succeeds after the correct keyring is installed and referenced.', NULL, NULL),
('System Setup & Configuration', 'Software & Package Management', 'Repository Configuration', 'Create a private, HTTPS APT repository on localhost using reprepro and nginx, sign it with a dedicated GPG key exported to /etc/apt/keyrings/bench-archive.gpg, and protect it with HTTP Basic Auth. Add a sources.list.d entry that uses signed-by and credentials from /etc/apt/auth.conf.d plus APT pinning to prefer this origin, then verify apt update and installing a test package come only from the signed repo.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Log Analysis & Troubleshooting', 'Create a CLI that parses /var/log (syslog, auth.log, kern.log, and rotated files) for the last 24h, normalizes PIDs/IPs/hex to cluster messages into error signatures, and ranks them by frequency. Produce /app/log_report.json and /app/log_report.txt summarizing each cluster with count, first/last timestamps, and inferred service to aid rapid fault isolation.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Log Analysis & Troubleshooting', 'Create a log-analysis utility that scans /var/log (including rotated *.1 and *.gz files) and journalctl for the last 24h to detect recurring SSH auth failures per IP, systemd crash/restart loops, kernel OOM/I/O/EXT4 warnings, and SMART/disk errors, outputting counts and first/last timestamps to /var/log/health/report.json. Schedule it via cron to run every 15 minutes, keep a 7-day rolling archive under /var/log/health/history/, and exit non-zero when thresholds are exceeded to flag incidents.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Log Analysis & Troubleshooting', 'Enable persistent journald storage and implement a CLI tool that scans the last 24 hours of logs (journalctl and /var/log/*) to produce /app/output/log_health.json summarizing recurring errors by service, kernel disk I/O/EXT4/SMART warnings, and top IPs for SSH auth failures. Add a systemd service+timer that streams logs and appends an alert to /app/output/alerts.log whenever more than 10 ''Failed password'' messages from the same IP occur within 5 minutes.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Log Analysis & Troubleshooting', 'Enable persistent journald storage and implement a tool that parses the last 24h of system logs to detect flapping systemd services (restarts), recurring kernel I/O errors, and repeated SSH auth failures, aggregating them into /app/incident_report.json with counts and first/last timestamps. The tool must also emit a remediation checklist to /app/remediation.txt with per-issue hints (e.g., identify the failing unit, suggest RestartSec, highlight suspect devices/IPs).', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Log Analysis & Troubleshooting', 'Enable persistent systemd-journal storage and implement a CLI tool that scans /var/log and journalctl for the last 24 hours, normalizes messages into signatures by stripping volatile fields, and ranks recurring errors while flagging previously unseen error types. Produce both a machine-readable JSON report and a concise human summary to guide troubleshooting of the top offenders.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Performance Tuning', 'Deploy Nginx to serve a large static file and record a baseline using a load generator (e.g., wrk). Tune worker and I/O settings (epoll, worker_processes auto, worker_connections, sendfile/tcp_nopush, open_file_cache, reuseport, directio for large files) to achieve at least a 50% throughput increase while keeping 99th percentile latency under a set target.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Performance Tuning', 'Implement PSI-aware memory tuning by enabling zram swap and adjusting vm.swappiness, min_free_kbytes, and dirty writeback thresholds to reduce contention under load. Drive concurrent memory pressure with stress-ng alongside a lightweight HTTP service and demonstrate improved p95/p99 latency and zero OOMs versus a baseline configuration.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Performance Tuning', 'Optimize a localhost Nginx static-file server for high concurrency and low latency by tuning Linux TCP/sysctl (e.g., somaxconn, tcp_max_syn_backlog, ip_local_port_range), file-descriptor limits, and Nginx worker settings (worker_processes, worker_connections, reuseport, sendfile). Provide a repeatable wrk/ab benchmark that records before/after throughput and p99 latency, demonstrating measurable improvement and saving results to /app/perf/results.json.', NULL, NULL),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Performance Tuning', 'Use cgroup v2 (via systemd) to isolate a foreground web service from background CPU and disk contention by tuning cpu.max/cpu.weight, io.weight, and memory.high/memory.min. Induce load with stress-ng/fio and demonstrate improved p99 latency under wrk after tuning compared to a baseline.', NULL, ARRAY['web']),
('System Setup & Configuration', 'System Monitoring & Diagnostics', 'Performance Tuning', 'Use cgroups v2 (via systemd slices) to constrain a CPU/memory‑intensive background workload while prioritizing a latency‑sensitive HTTP server, and tune kernel networking sysctls (somaxconn, tcp_fastopen) to improve accept throughput. Verify under sustained stress that the server maintains sub‑50 ms p95 latency over 1000 requests and that the batch workload cannot exceed its CPU/memory quotas.', NULL, ARRAY['networking']);
