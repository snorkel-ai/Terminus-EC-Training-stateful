-- Compact batch 8/29: rows 351-400

INSERT INTO task_inspiration (category, subcategory, subsubcategory, description, difficulty, tags) VALUES
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Environment Variable Misconfiguration', 'Diagnose and fix a CLI tool that crashes on Unicode filenames due to a non-UTF-8 locale by correctly configuring LANG/LC_ALL and generating the required UTF-8 locale in the container. Persist the fix for both interactive and non-interactive shells, then verify the tool processes files with accented characters without errors.', NULL, ARRAY['container']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Environment Variable Misconfiguration', 'Diagnose why both curl and a Python requests client fail HTTPS verification against a provided local TLS service, tracing it to a missing CA trust path. Configure SSL_CERT_FILE or SSL_CERT_DIR to point at the bundled CA bundle so both tools succeed, and verify by performing a successful GET request.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Virtual Environment & Container Issues', 'Diagnose a Docker image where a preinstalled Conda environment is not used at runtime, causing imports to fail because the container launches with a non-login shell that never activates Conda. Fix the Dockerfile/entrypoint to reliably run under the intended Conda env (e.g., conda run -n app or sourcing conda.sh) and verify by executing a provided script that imports numpy and prints its version.', NULL, ARRAY['docker', 'container']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Virtual Environment & Container Issues', 'Diagnose and fix a relocated Python virtual environment whose scripts and sys.path still reference an old absolute interpreter path, causing entry points and imports to fail. Recreate or patch the venv so it binds to the container’s Python and current path, then verify by activating it and successfully running the project’s console script and an import/version check.', NULL, ARRAY['python', 'container']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Virtual Environment & Container Issues', 'Fix a Poetry-managed Python app in Docker where `poetry run` fails because Poetry is bound to a stale global virtualenv created with a different Python version outside the container. Reconfigure Poetry to create an in-project venv with the container’s interpreter, rebuild the environment cleanly, and verify the app’s CLI executes end-to-end.', NULL, ARRAY['python', 'docker', 'container']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Virtual Environment & Container Issues', 'In a Docker image, a prebuilt Python virtualenv was moved to a new path, causing console_scripts to fail with ''bad interpreter'' and C-extension imports to break due to a mismatched sys.base_prefix. Diagnose and re-home the venv without reinstalling packages by fixing pyvenv.cfg, rewriting shebangs and activation scripts, cleaning conflicting PYTHONPATH/site-packages, and verify by running a bundled CLI and importing a compiled wheel (e.g., numpy).', NULL, ARRAY['docker', 'python']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Virtual Environment & Container Issues', 'In an Alpine-based Docker container, diagnose why importing a pip-installed C-extension fails due to manylinux/glibc vs musl incompatibility. Resolve by ensuring compatible musllinux wheels or required runtime libraries (or switching base image) and verify the fix with a successful import and small test run.', NULL, ARRAY['docker', 'container']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'API Request & Response Issues', 'Diagnose and fix intermittent HMAC-signed API request failures to a local microservice caused by mismatched JSON canonicalization and header normalization between client and server. Update the client to produce a canonical UTF-8 JSON body with stable key order and correct Content-Type/Date headers before signing, then verify end-to-end and add a regression test.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'API Request & Response Issues', 'Diagnose why a POST JSON request to a REST API fails after an HTTP redirect (e.g., 301/302 to HTTPS) because the client changes the method or drops the body, leading to 405/400 responses. Fix the client or invocation to target the canonical base URL or preserve method/body on redirect (use 307/308 semantics), and verify the corrected request succeeds with the expected JSON response.', NULL, ARRAY['rest', 'api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'API Request & Response Issues', 'Diagnose why a Python CLI using requests gets 401 and 415 from a local OAuth2-protected REST API: the token exchange is incorrectly sent as JSON instead of application/x-www-form-urlencoded and subsequent requests pass the token as a query param instead of Authorization: Bearer. Fix the payload encoding and header usage, then verify by successfully calling a paginated endpoint while honoring Retry-After to avoid 429s.', NULL, ARRAY['python', 'rest', 'api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'API Request & Response Issues', 'Diagnose why a provided CLI client receives 401 ''signature mismatch'' from a mock HMAC-signed REST API by auditing canonicalization (query param order, header inclusion, body hashing) and timestamp/nonce handling. Correct the signing logic and required headers so POST /v1/payments returns 201, then verify by GETting the created resource and writing its id to /app/payment_id.txt.', NULL, ARRAY['rest', 'api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Connection & Timeout Errors', 'Diagnose and fix slow HTTP requests caused by the system preferring IPv6 (AAAA) addresses that are unroutable, leading to connection timeouts before IPv4 fallback. Reconfigure address selection, routing, or resolver settings so connections to a dual-stack host complete quickly without timeouts.', NULL, NULL),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Connection & Timeout Errors', 'Diagnose why curl/http clients to a local service on localhost:5000 time out because global proxy settings force localhost traffic through an unreachable HTTP(S) proxy. Remove or correctly scope the proxy configuration (e.g., NO_PROXY, environment vars, tool configs) and verify direct local connectivity works from curl and a sample client.', NULL, NULL),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Connection & Timeout Errors', 'Diagnose why outgoing HTTP requests from a CLI client to a local/internal API consistently time out due to misconfigured proxy environment variables (HTTP_PROXY/HTTPS_PROXY/NO_PROXY) that route localhost/intranet traffic through a dead proxy. Correct the environment and client/server settings so direct connections to 127.0.0.1 and internal hostnames bypass the proxy and succeed, verifying with curl and a simple script.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Connection & Timeout Errors', 'Investigate persistent timeouts when a local microservice calls an internal API and discover they are caused by inherited HTTP(S)_PROXY environment variables pointing to a dead proxy. Reconfigure NO_PROXY or unset the proxy so direct connections succeed, and verify with curl and a test run.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Connection & Timeout Errors', 'Investigate why a client app’s HTTP requests to an internal service stall before timing out: the hostname resolves to IPv6 while the server only binds on IPv4. Fix the mismatch (e.g., enable dual-stack binding or force IPv4 resolution) and verify low-latency success with the provided test script.', NULL, NULL),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Proxy, SSL & Certificate Errors', 'A Python client fails mutual TLS to a Flask service behind an Nginx reverse proxy because the issued certificates lack SAN/extendedKeyUsage and the proxy serves an incomplete certificate chain. Regenerate CA/server/client certs with proper SAN and EKU, configure Nginx to present the full chain and require client auth, update the client trust store, and verify successful requests with curl and a provided test script.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Proxy, SSL & Certificate Errors', 'Diagnose and fix a Node.js service that fails on outbound HTTPS due to an intercepting proxy and missing CA trust while also misrouting internal calls through the proxy. Configure HTTP(S)_PROXY and NO_PROXY correctly and provide the proxy’s root CA to Node (e.g., NODE_EXTRA_CA_CERTS) so external requests succeed via the proxy and internal hosts bypass it, verified by two test fetches.', NULL, NULL),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Proxy, SSL & Certificate Errors', 'Diagnose and fix an Nginx reverse proxy that returns 502 due to a failed TLS handshake with an HTTPS upstream caused by disabled SNI and an untrusted/intermediate-missing CA chain. Update the proxy’s TLS settings (enable SNI, set the correct upstream host, provide a trusted CA bundle) and verify that curling the proxied endpoint over HTTPS succeeds.', NULL, NULL),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Proxy, SSL & Certificate Errors', 'Diagnose and repair a Maven-based Java project that fails to download dependencies through a corporate HTTPS proxy performing TLS interception. Import the provided root CA into the JVM truststore, configure authenticated proxy settings without disabling SSL verification, and verify mvn dependency:resolve succeeds.', NULL, ARRAY['java']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Proxy, SSL & Certificate Errors', 'Fix a broken mutual TLS setup on an Nginx reverse proxy fronting a local API: clients see handshake failures and ''unknown ca'' errors due to an incomplete server certificate chain and verification against the wrong client CA. Rebuild and reference the correct fullchain, configure nginx to trust the proper client CA, issue a client certificate/key, reload, and verify curl with the client cert succeeds while requests without it are rejected.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Service Availability & Health Checks', 'Diagnose a FastAPI service managed by supervisord that never becomes healthy because it binds only to 127.0.0.1 and its /healthz endpoint crashes on missing environment configuration. Reconfigure binding to 0.0.0.0 and make the health check independent of external services, then verify the container healthcheck and curl to /healthz return 200.', NULL, ARRAY['container']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Service Availability & Health Checks', 'Diagnose a Nginx→Gunicorn→Flask stack that never passes its health check because Nginx proxies to a nonexistent unix socket, Gunicorn is listening on TCP port 8001, and the /health endpoint hard-depends on a missing database. Reconfigure the upstream to the correct port and make the health route shallow so the service reports healthy and curl to /health returns 200.', 'hard', ARRAY['database']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Service Availability & Health Checks', 'Diagnose a Python FastAPI service that returns 500 on /health only when started by systemd due to an incorrect working directory and missing environment variables. Fix the systemd unit (WorkingDirectory, Environment/EnvironmentFile, ExecStart, dependencies) and any file paths so the service is active and curl localhost/health returns 200.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Service Availability & Health Checks', 'Diagnose an Nginx-proxied FastAPI service whose /health endpoint returns intermittent 502s due to IPv6/IPv4 mismatch (upstream resolving to ::1 while the app binds only to 127.0.0.1). Adjust the app bind address or Nginx upstream to ensure consistent HTTP 200 health checks across restarts.', NULL, NULL),
('Debugging & Troubleshooting', 'Network & Service Debugging', 'Service Availability & Health Checks', 'Diagnose and fix a misconfigured reverse proxy that causes a healthy backend service to fail its /healthz check (e.g., wrong upstream port, missing Host/X-Forwarded headers, or TLS-to-HTTP mismatch). Correct the proxy and service configs and reload them so curl http://localhost/healthz returns 200 with the expected body.', NULL, ARRAY['backend']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'CPU & Memory Profiling', 'Profile a C log-parsing utility that becomes slow and runs out of memory on a large dataset due to quadratic string concatenation and leaked allocations. Use Valgrind (memcheck/massif) or perf/callgrind to pinpoint hotspots, refactor to buffered/streamed processing and proper frees, and verify identical output with markedly lower peak RSS and faster runtime.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'CPU & Memory Profiling', 'Profile a C++ image-processing CLI that becomes CPU-bound and steadily grows memory during a large batch, using perf and Valgrind (callgrind/massif) to pinpoint an O(n^2) hot loop and unbounded container growth. Implement fixes to achieve at least 2x faster runtime and reduce peak RSS by 50% or more, verified by a provided bench.sh baseline/after comparison.', NULL, ARRAY['container']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'CPU & Memory Profiling', 'Profile a Go HTTP log aggregator that shows steadily rising memory usage and high CPU under sustained load using pprof (heap and CPU profiles) to uncover a goroutine leak and an O(n^2) JSON concatenation hotspot. Implement fixes (proper context cancellation, bounded channels, and bytes.Buffer-based assembly) and verify with the provided load test that throughput improves and peak RSS remains bounded.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'CPU & Memory Profiling', 'Profile a Python CSV-to-JSON pipeline that pegs a CPU core and steadily increases RSS on large inputs. Use cProfile and tracemalloc to locate an O(n^2) dedup step and an unbounded cache, refactor to a streaming/chunked approach with bounded caching, and verify at least 2× speedup and <200 MB peak memory on a 1M-row dataset.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'CPU & Memory Profiling', 'Profile a mixed Python+C log-processing tool to locate CPU hotspots and memory bloat using cProfile, perf, and Valgrind (memcheck/massif). Eliminate an O(n^2) Python loop and fix a C-side leak so the job completes ≥2x faster with ≥50% lower peak RSS while preserving identical output.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'I/O & Disk Bottlenecks', 'Diagnose a C-based log aggregator that is extremely slow due to 1-byte read() calls and an fsync/flush on every line. Refactor it to use buffered streaming and batched writes (e.g., setvbuf/FILE* or coalesced writev) and verify /app/bench.sh runs at least 5x faster without changing output.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'I/O & Disk Bottlenecks', 'Diagnose a Python SQLite ingestion script that is painfully slow due to per-row transactions causing fsync storms and page cache thrashing. Use strace/iostat to confirm the I/O bottleneck, then optimize by batching transactions and enabling WAL with appropriate PRAGMAs to achieve >5× speedup while preserving identical database contents.', NULL, ARRAY['python', 'database']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'I/O & Disk Bottlenecks', 'Diagnose a Python log-processing CLI that is extremely slow because it writes output one line at a time with fsync after each write and a tiny buffer. Rework it to batch and buffer writes and use atomic rename on completion, remove unnecessary fsyncs, and verify at least a 5x speedup on the provided dataset with byte-for-byte identical output.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'I/O & Disk Bottlenecks', 'Diagnose and fix a severe disk I/O bottleneck in a Python-based SQLite bulk loader that inserts rows individually (autocommit on), triggering per-row fsyncs and tiny writes. Optimize by batching transactions and enabling WAL with appropriate PRAGMAs (e.g., synchronous=NORMAL, page/cache tuning) to achieve a measurable speedup while preserving identical dataset contents.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'I/O & Disk Bottlenecks', 'Diagnose why a Python log-processor that splits records per user is extremely slow due to per-line open/flush/close and tiny writes causing fsync storms. Use strace/iostat to pinpoint the issue, then refactor to maintain buffered file handles and batch writes, verifying identical output and improved runtime.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Network Performance Tuning', 'Diagnose a severe throughput collapse and sporadic stalls across a VXLAN tunnel caused by an MTU black hole (broken PMTUD), using ping with DF and tcpdump to determine the effective path MTU. Apply a fix by setting appropriate interface MTUs and TCP MSS clamping so iperf3 throughput improves at least 3x without packet loss, and write the discovered MTU/MSS to /app/mtu_report.txt.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Network Performance Tuning', 'Diagnose and fix severely limited throughput between two containers on a high-RTT simulated link by identifying TCP window/buffer and congestion-control misconfiguration. Measure with iperf3 and ss/tcpdump, then tune sysctl (enable window scaling, raise rmem/wmem and tcp_rmem/tcp_wmem, switch to BBR with fq, adjust MTU/MSS if needed) and verify higher goodput with fewer retransmits.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Network Performance Tuning', 'Diagnose and optimize a gRPC microservice’s network stack under a simulated 80 ms RTT and 1% packet loss to cut p99 latency by at least 50% without reducing throughput. Apply and verify kernel- and app-level tuning (e.g., congestion control/qdisc, HTTP/2 flow-control windows, TCP keepalive/Nagle, MTU/MSS) using the provided load generator and report.', NULL, ARRAY['grpc']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Network Performance Tuning', 'Diagnose and optimize poor TCP throughput between two local endpoints under simulated WAN latency by measuring with iperf3, inspecting kernel TCP settings, and identifying buffer/congestion-control bottlenecks. Apply sysctl/qdisc tuning (e.g., enable BBR, adjust rmem/wmem and net.core.{r,w}mem_max, set fq qdisc) and verify at least a 2× throughput improvement.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Network Performance Tuning', 'Diagnose why a Python asyncio TCP client/server for log shipping achieves poor throughput and high p99 latency due to tiny writes triggering Nagle/delayed-ACK interactions and lack of connection reuse. Tune by enabling TCP_NODELAY, batching into 64KB frames, increasing socket buffers and enabling keep-alive/pooling, then verify a 5–10× throughput gain and sub-20ms p99 with the provided load generator.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Parallelization & Concurrency Bugs', 'Diagnose a deadlock and throughput collapse in a Rust Tokio-based pipeline where a Mutex is held across await points and a bounded mpsc channel backpressures a blocking file writer. Refactor to avoid cross-await locks and move blocking I/O to spawn_blocking or a dedicated thread pool, then verify no hangs under a provided stress script and achieve at least 3× higher throughput.', NULL, ARRAY['rust']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Parallelization & Concurrency Bugs', 'Diagnose a throughput collapse in a Java service where CompletableFuture chains run on a fixed-size ExecutorService, causing thread-starvation deadlocks under load. Refactor the scheduling (e.g., non-blocking composition or separate executors for nested tasks) so the load test completes without timeouts and throughput improves by at least 2x.', NULL, ARRAY['java']),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Parallelization & Concurrency Bugs', 'Diagnose and fix a deadlock and goroutine leak in a Go fan-out/fan-in worker pool where misordered channel closes and blocking sends during cancellation stall the pipeline under load. Correct the synchronization (context propagation, channel buffering, and close/drain order) so the provided stress test finishes under the time limit and go test -race shows no leaks or races.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Parallelization & Concurrency Bugs', 'Diagnose and fix a deadlock in a Go-based concurrent log processor where workers hold a mutex while sending to a results channel, creating a circular wait with the aggregator that acquires the same lock. Refactor to avoid holding locks across channel operations (e.g., copy before send or introduce a dispatcher) and verify under a stress harness that prior hangs disappear and throughput improves.', NULL, NULL),
('Debugging & Troubleshooting', 'Performance & Resource Optimization', 'Parallelization & Concurrency Bugs', 'Diagnose and fix an intermittent deadlock in a Rust Tokio service caused by holding a std::sync::Mutex across await points and doing blocking file I/O inside async tasks, leading to hangs under load. Refactor to use tokio::sync::Mutex/RwLock and spawn_blocking for I/O, add cancellation timeouts, and verify via a stress script, cargo test, and tokio-console traces.', NULL, ARRAY['rust']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Dependency & Environment Audit', 'Diagnose why a Node.js project’s native addon (e.g., sharp or grpc) fails to load with errors like GLIBC_x.y not found or wrong ELF class inside the container. Audit Node ABI vs compiled binaries and system libc/libstdc++ versions, rebuild or pin a compatible binary with node-gyp and verify the addon loads in a minimal script.', NULL, ARRAY['grpc', 'container']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Dependency & Environment Audit', 'Diagnose why the prebuilt /app/server web binary exits on launch with “No such file or directory” and fix it by auditing dynamic library dependencies and environment drift (e.g., missing libsqlite3 due to CGO). Install or rebuild with the correct dependencies (or static linking), verify the /health endpoint responds, and write a brief postmortem to /app/POSTMORTEM.md.', NULL, ARRAY['web']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Dependency & Environment Audit', 'Investigate a prebuilt C++ CLI tool that fails at startup with a “GLIBCXX_x.y not found” error inside the container. Identify the ABI mismatch between the binary and the system libstdc++/glibc, remediate by aligning runtime libraries or rebuilding, and verify the tool runs successfully end-to-end.', NULL, ARRAY['container']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Dependency & Environment Audit', 'Investigate why importing a pip-installed C++ extension (e.g., scikit-learn) now fails with GLIBCXX/CXXABI symbol errors after a base image or compiler runtime change by auditing the system’s libstdc++/libgcc versus the wheel’s required ABI. Resolve by aligning the C++ runtime or installing compatible wheels/pins, then verify with a minimal script that imports and exercises the package.', NULL, NULL);
