-- Compact batch 9/29: rows 401-450

INSERT INTO task_inspiration (category, subcategory, subsubcategory, description, difficulty, tags) VALUES
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Error Reproduction & Isolation', 'Diagnose an intermittent segfault in a C utility that only occurs when compiled with -O2. Reproduce by varying compiler flags and inputs, then reduce the program to a minimal C file that crashes reliably and reveals the underlying undefined behavior.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Error Reproduction & Isolation', 'Reproduce a flaky ''Address already in use'' failure by isolating the smallest script that deterministically triggers a TCP port reuse race (TIME_WAIT) during rapid server restarts. Build a tiny server/client and use only standard OS tools to narrow the failure to missing socket cleanup/options, yielding a minimal reproducible case.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Error Reproduction & Isolation', 'Reproduce an intermittent deadlock in a Go HTTP server that occurs only under specific GOMAXPROCS values and concurrent request patterns, then isolate a minimal single-file program and deterministic request sequence that triggers it. Capture the exact environment and commands used (race detector, pprof blocking profile, goroutine dumps) to demonstrate the deadlock reliably.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Error Reproduction & Isolation', 'Reproduce an intermittent timestamp parsing failure that occurs only during daylight-saving transitions by controlling TZ and the system clock inside the sandbox. Isolate the minimal failing input and code path by iterating across DST boundary timestamps and documenting the exact timezone/offset combination that triggers the error.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Error Reproduction & Isolation', 'Reproduce and isolate a CLI tool crash that emits ''Broken pipe'' or exits non-zero when its stdout is piped to head/grep -m1, identifying the minimal code path that triggers SIGPIPE/EPIPE under controlled conditions. Implement graceful handling so the pipeline exits cleanly without stack traces or spurious errors.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Postmortem Documentation & Preventive Measures', 'Investigate a midnight outage where Nginx served 502s after a certbot renewal triggered an automatic reload that pulled in an incomplete vhost via a wildcard include. Diagnose configs/logs, implement a safe reload gate (nginx -t and atomic writes), and produce a postmortem detailing root cause, impact, and preventive measures.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Postmortem Documentation & Preventive Measures', 'Investigate a production failure where package installs and writes error with ''No space left on device'' despite ample free disk space, trace the root cause to inode exhaustion from a runaway temp/log file generator, and validate via df -i and remediation. Produce a concise postmortem detailing impact, timeline, contributing factors, and preventive measures such as file-count monitoring, log rotation policies, tmp cleanup jobs, and quotas.', NULL, ARRAY['monitoring']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Postmortem Documentation & Preventive Measures', 'Investigate an incident where API requests intermittently returned 401 due to container clock drift causing JWT nbf/exp validation failures around a DST transition. Reconstruct the timeline from logs and metrics, identify the root cause, and produce a postmortem summarizing impact, detection, and preventive measures (time synchronization, validation leeway, targeted monitoring/alerts).', NULL, ARRAY['api', 'container', 'monitoring']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Postmortem Documentation & Preventive Measures', 'Investigate intermittent authentication failures (401/403) traced to JWT validation errors caused by container clock drift and misconfigured timezone/time sync. Write a postmortem detailing timeline, root cause, impact, detection gaps, and concrete preventive measures (time synchronization policy, startup time sanity checks, monitoring/alerts, and validation tolerances).', NULL, ARRAY['container', 'monitoring']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Postmortem Documentation & Preventive Measures', 'Investigate why a nightly data export executed twice and produced corrupted partial uploads by reconstructing the timeline from cron logs, application logs, and a stale PID lock during a DST transition. Write a postmortem detailing root cause, impact scope, contributing factors, and preventive measures (timezone policy, idempotent runs, and robust lock hygiene).', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Traceback & Stack Analysis', 'Diagnose a Java service hang by capturing and analyzing multiple jstack thread dumps to trace a lock-order inversion deadlock (each thread waiting on the other’s monitor) and identify the exact code paths involved. Implement a fix by enforcing a consistent lock acquisition order or using tryLock with timeouts, rebuild, and verify the service remains responsive under concurrent load.', NULL, ARRAY['java']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Traceback & Stack Analysis', 'Investigate a Java service that fails at startup with a NoSuchMethodError originating from org.apache.commons.lang3 in the stack trace, indicating JAR hell from conflicting transitive dependencies. Use gradle dependencies to trace the classpath, add dependency constraints or exclusions to resolve the conflict, then rebuild and verify the service starts and a provided smoke test passes.', NULL, ARRAY['java']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Traceback & Stack Analysis', 'Investigate a Node.js CLI that crashes on startup with "RangeError: Maximum call stack size exceeded"; run with --trace-uncaught and --trace-warnings to obtain full stack traces and pinpoint a circular require/import loop causing infinite recursion. Refactor the modules to break the cycle and verify the program starts and returns the expected output.', NULL, NULL),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Traceback & Stack Analysis', 'Investigate a Python ProcessPool-based task that fails with BrokenProcessPool by reading the exception chain and worker stack traces to find the underlying pickling error caused by a nested/local function. Refactor the callable to be picklable (e.g., move to module scope) and verify the parallel job completes successfully.', NULL, ARRAY['python', 'parallel']),
('Debugging & Troubleshooting', 'Root Cause Analysis & Postmortem Debugging', 'Traceback & Stack Analysis', 'Investigate an intermittently crashing Go HTTP service by analyzing its panic log and full goroutine dump to trace the execution path to a ''concurrent map writes'' failure and pinpoint the offending map and call sites. Implement a minimal synchronization fix and a stress test that runs with -race to verify the panic no longer occurs.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Access Policy & Role Misconfiguration', 'Diagnose and correct a MinIO S3 setup where a data-ingest user cannot list or upload objects due to conflicting bucket and user policies. Apply the least-privilege fix by adjusting the bucket and user policies so that aws s3 ls and multipart uploads succeed only within the intended bucket/prefix.', NULL, ARRAY['aws']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Access Policy & Role Misconfiguration', 'Diagnose and fix a Redis ACL misconfiguration that blocks a non-default user from executing required commands (e.g., SET/GET) on a specific key prefix used by a sample app. Update the ACLs to grant least-privilege access for that user and verify the app completes successfully end-to-end.', NULL, ARRAY['redis']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Access Policy & Role Misconfiguration', 'Diagnose and repair a Kubernetes RBAC misconfiguration that prevents a CI service account from applying resources in a specific namespace. Adjust Roles/ClusterRoles and the corresponding (Cluster)RoleBindings to grant the minimal verbs and scopes required so a provided kustomize/helm deploy completes successfully using only that service account.', NULL, ARRAY['kubernetes']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Access Policy & Role Misconfiguration', 'Diagnose why a data-ingestion script receives 403 AccessDenied when uploading to an S3-compatible MinIO bucket due to a mismatched bucket policy and user credentials. Correct the bucket and user policies to grant least-privilege PutObject/ListBucket on the intended prefix, update the client configuration, and verify the script completes successfully with upload and listing.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Access Policy & Role Misconfiguration', 'Fix a Kubernetes RBAC setup where the ci-deployer ServiceAccount cannot create or patch Deployments in the staging namespace, yet is mistakenly allowed to read Secrets cluster-wide. Diagnose Role/ClusterRole and (Cluster)RoleBinding scope and apiGroup/verb mismatches, then rework the policy to grant least-privilege deploy rights only in staging and no Secrets access; verify with kubectl auth can-i and by successfully applying the provided manifest.', NULL, ARRAY['kubernetes']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Authentication & Authorization Failures', 'Debug an AWS CLI profile that intermittently fails to access an S3 bucket via SSO + AssumeRole (AccessDenied and ExpiredToken errors). Refresh the SSO cache, correct the profile’s role_arn/region, and ensure the role has s3:ListBucket/s3:GetObject/s3:PutObject permissions; verify by listing the bucket and uploading a test object.', NULL, ARRAY['aws']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Authentication & Authorization Failures', 'Diagnose and fix a local PostgreSQL login failure for user ''app'' where URI-based connections are rejected due to pg_hba.conf rule order, SCRAM-vs-MD5 password mismatch, and missing LOGIN/CONNECT privileges. Correct the configuration and role settings, reload PostgreSQL, and verify with psql postgresql://app:app@localhost:5432/appdb -c SELECT 1.', NULL, ARRAY['postgresql']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Authentication & Authorization Failures', 'Diagnose and repair a local PostgreSQL connection that fails with pg_hba.conf rejection and mismatched password method (SCRAM vs md5), preventing a bundled Python app from logging in. Update pg_hba.conf, recreate the user with the correct authentication scheme and role grants, reload Postgres, and verify a psycopg2 script can perform read/write queries.', NULL, ARRAY['postgresql', 'python', 'logging']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Authentication & Authorization Failures', 'Diagnose and resolve npm 401 Unauthorized errors when installing from a local Verdaccio registry by pinpointing bad/expired credentials or scope misconfiguration in ~/.npmrc and registry ACLs. Reauthenticate or correct token scopes/registry settings so installing a private package succeeds from the terminal.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Authentication & Authorization Failures', 'Diagnose why kubectl returns Forbidden and token-related errors using the provided kubeconfig for namespace analytics. Replace the expired/invalid ServiceAccount token and create the minimal Role/RoleBinding needed, update kubeconfig, and verify by successfully applying manifests and listing pods in that namespace.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Environment Secrets & Credential Mismanagement', 'Diagnose a bootstrap script that fails to fetch secrets from a local HashiCorp Vault due to a stale VAULT_TOKEN, missing VAULT_NAMESPACE, and incorrect CA settings. Implement AppRole login using role_id/secret_id files, set VAULT_ADDR/VAULT_CACERT/VAULT_NAMESPACE correctly, and update the script so non-interactive secret retrieval and app startup succeed.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Environment Secrets & Credential Mismanagement', 'Diagnose and fix a CI/container build that fails to fetch private npm packages and Git submodules due to mismanaged tokens (missing/misnamed env vars, malformed .npmrc, and SSH key permission issues). Repair the credential chain and config so npm install and git submodule update complete non-interactively.', NULL, ARRAY['container', 'git']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Environment Secrets & Credential Mismanagement', 'Diagnose and fix a Dockerized Node.js build that fails npm install with 401 due to a missing or mis-scoped NPM_TOKEN for a private registry. Modify the Dockerfile and build command to securely pass the token only to the dependency layer and verify by successfully building and running the app that imports the private package.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Environment Secrets & Credential Mismanagement', 'Diagnose and repair a failing S3 backup in a local MinIO sandbox caused by mismanaged AWS credentials and environment (incorrect AWS_ACCESS_KEY_ID/SECRET, missing region, wrong endpoint URL, and a conflicting default profile). Reconfigure environment variables and ~/.aws files so both aws CLI and a boto3 script can authenticate and list the target bucket without hardcoding secrets.', 'hard', ARRAY['aws']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'Environment Secrets & Credential Mismanagement', 'Diagnose why sops cannot decrypt secrets.enc.yaml in the container because the AGE private key is provided as a base64, single-line environment variable that is never materialized as a key file. Reconstruct the PEM from the env var, set SOPS_AGE_KEY_FILE with correct permissions, and verify decryption by producing /app/secrets.yaml.', NULL, ARRAY['container']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'File & Directory Permission Errors', 'A reverse proxy cannot connect to its backend via a Unix domain socket at /run/app.sock due to permission denied on the socket path. Diagnose and correct directory/socket ownership, mode bits, and group/ACL settings so the proxy user can connect, then verify a 200 OK from curl localhost.', NULL, ARRAY['backend']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'File & Directory Permission Errors', 'Diagnose and fix a Unix domain socket connection failing with ''Permission denied'' by auditing the socket file and its parent directory ownership/modes and the creator’s umask. Implement a least-privilege solution (e.g., dedicated group, setgid directory, corrected socket permissions), then verify the client can connect and exchange data successfully.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'File & Directory Permission Errors', 'Diagnose and fix a reverse proxy failing with 502 because nginx cannot access a backend UNIX domain socket (EACCES) due to incorrect ownership/permissions on the socket and its parent directories. Adjust ownership, mode, and directory execute bits or set ACLs, then make the fix persistent by updating the systemd .socket/.service or tmpfiles.d configuration, and verify that curl via nginx returns 200.', NULL, ARRAY['backend']),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'File & Directory Permission Errors', 'Diagnose why a client fails to connect to a local service over a Unix domain socket (/run/app/app.sock) with EACCES and fix the underlying directory and socket ownership/permission and group-membership issues. Verify the repair by enabling the non-root client to connect end-to-end using the provided health-check script.', NULL, NULL),
('Debugging & Troubleshooting', 'Security & Access Debugging', 'File & Directory Permission Errors', 'Diagnose why a client receives ''Permission denied'' when connecting to a Unix domain socket at /app/run/metrics.sock: the socket’s parent directory lacks execute permission for the client’s group and the daemon’s umask creates overly restrictive socket permissions. Implement a least-privilege fix by adjusting directory ownership/modes and the daemon’s umask or group, then verify bidirectional communication over the socket.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Background Service Failures', 'Diagnose a systemd socket-activated service that never starts on client connect due to mismatched unit names, incorrect ListenStream/ListenUnix path, and restrictive socket directory permissions. Correct the .socket/.service units (naming, ExecStart, WorkingDirectory, User), reload and enable socket activation, and verify the daemon spawns on demand and successfully serves a test request.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Background Service Failures', 'Investigate a failing systemd timer + service that should create periodic backups but exits immediately under systemd while the same script runs fine interactively. Diagnose and fix unit misconfigurations (absolute ExecStart, WorkingDirectory, EnvironmentFile, and executable permissions), reload the daemon, and verify the timer produces a backup in /app/backups.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Background Service Failures', 'Investigate a systemd-managed Celery worker that immediately enters a restart loop because it launches before its Redis backend and points to a non-existent virtualenv, producing empty or truncated logs. Repair the unit by correcting ExecStart/WorkingDirectory/Environment, adding Requires= and After= redis-server.service, and verifying the service stays active and processes a sample task.', NULL, ARRAY['redis', 'backend']),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Background Service Failures', 'Investigate a systemd-managed daemon that immediately enters a restart loop because unit hardening (DynamicUser with ProtectSystem=full) prevents creation of its PID/log/state files. Use journalctl and unit inspection to diagnose and then update the unit to provision writable runtime/state paths (e.g., RuntimeDirectory/StateDirectory or ReadWritePaths) so the service starts and stays active, verified by a heartbeat file appearing.', 'hard', NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Background Service Failures', 'Investigate why a systemd timer’s backup.service succeeds when started manually but fails when triggered by the timer due to environment/working-directory differences and reliance on relative paths. Update the unit(s) to use absolute ExecStart, set WorkingDirectory and Environment (PATH/HOME), add logging, then verify the timer fires and completes successfully.', NULL, ARRAY['logging']),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Log Inspection & Anomaly Detection', 'Analyze journald, kernel dmesg, and application/service logs to time-correlate intermittent 5xx outages with OOM-killer events caused by a runaway process triggered by a cron job. Produce a concise root-cause timeline and propose a mitigation (e.g., systemd MemoryMax) to prevent recurrence.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Log Inspection & Anomaly Detection', 'Correlate a recurring 2–3 minute outage by analyzing nginx access/error logs, systemd-journal logs, and cron logs while compensating for a deliberate 5‑minute clock skew between components. Identify that a misconfigured logrotate postrotate script intermittently sends SIGSTOP to the web app and apply a minimal fix so the outage ceases.', NULL, ARRAY['web']),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Log Inspection & Anomaly Detection', 'Diagnose intermittent restarts of a systemd-managed service by analyzing journalctl and kernel logs to detect OOM-killer and memory pressure events time-correlated with the service’s crashes. Implement a mitigation (e.g., adjust MemoryMax or service configuration) and verify stable operation with no recurring log anomalies.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Log Inspection & Anomaly Detection', 'Investigate intermittent TLS handshake failures by scanning journalctl/syslog and application logs for anomalies like “certificate not yet valid” alongside abrupt timestamp jumps, correlating them with NTP desynchronization events. Restore correct time sync (e.g., via systemd-timesyncd or chrony) and verify by re-running a TLS client to confirm error-free handshakes and aligned log timestamps.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Log Inspection & Anomaly Detection', 'Scan syslog, auth.log, and NTP logs (including rotated .gz) to detect a surge in authentication errors and correlate it with a significant NTP time step, pinpointing the drift magnitude and window. Output a concise timeline report naming the triggering event and the impacted services (e.g., sshd, sudo) where errors align with the clock change.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Process Crashes & Core Dumps', 'A Node.js script using the sharp image library crashes with SIGSEGV; enable core dumps and use coredumpctl + gdb (with addr2line) to analyze the core and trace the fault into libvips due to an ABI/version mismatch. Repair by installing compatible libvips/sharp binaries or rebuilding the module, then verify an image resize completes without crashing.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Process Crashes & Core Dumps', 'Analyze a core dump from a Rust CLI that intermittently SIGSEGVs during FFI calls into a C library. Use gdb and addr2line to pinpoint a dangling pointer/use-after-free across the FFI boundary, patch the Rust/C bindings to fix ownership and lifetimes, rebuild, and verify the crash no longer occurs under the stress script.', NULL, ARRAY['rust']),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Process Crashes & Core Dumps', 'Diagnose why /app/bin/ingest crashes with SIGSEGV and leaves /app/core by using gdb to obtain a fully symbolicated backtrace (installing debug symbols if needed) and tracing the fault to a NULL function pointer returned by dlsym due to a missing plugin symbol. Repair the runtime environment (e.g., install the correct .so or adjust LD_LIBRARY_PATH) or patch the loader to handle NULL safely, and verify the program runs to completion without crashing.', NULL, NULL),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Process Crashes & Core Dumps', 'Investigate a Node.js service that segfaults when requiring a native addon, analyzing the generated core dump with gdb to pinpoint an ABI/version mismatch between Node and the .node binary. Rebuild the addon for the correct Node-API/ABI (e.g., via node-gyp or prebuilds), replace the artifact, and verify the service runs and responds to a simple request without crashing.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'System & Process Diagnostics', 'Process Crashes & Core Dumps', 'Reproduce and analyze a core dump from a multithreaded C service that intermittently segfaults on SIGTERM due to a reentrant, non-async-signal-safe signal handler freeing shared memory twice. Enable core dumps, use gdb to pinpoint the crashing thread and double-free path, refactor the handler to defer work via a self-pipe and enforce single-ownership, rebuild, and verify stability under a stress harness.', NULL, NULL);
