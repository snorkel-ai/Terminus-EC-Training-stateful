-- Compact batch 7/29: rows 301-350

INSERT INTO task_inspiration (category, subcategory, subsubcategory, description, difficulty, tags) VALUES
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Automation & Cron Job Failures', 'Investigate a nightly ETL cron job that succeeds interactively but fails under cron by reproducing the cron environment, inspecting mail/cron logs, and pinpointing issues like missing PATH/virtualenv, % expansion in the command, relative paths, or SSH key permission denials. Fix the job by correcting the cron entry (escaping %, adding absolute paths and required environment), adjusting file permissions, and verifying via a forced run and persisted logs.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Automation & Cron Job Failures', 'Investigate why a nightly cron job that runs /app/etl/run_pipeline.sh succeeds interactively but fails under cron due to missing virtualenv activation, PATH differences, non-UTF-8 locale, and a stale lock blocking retries. Make the job cron-safe by using absolute paths and a venv-aware shebang, exporting LANG/LC_ALL, adding flock-based locking, correcting permissions, and verifying execution/logging when triggered by cron.', NULL, ARRAY['logging']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Data Format & Schema Mismatches', 'Debug a failing ETL that joins newline-delimited JSON to CSV lookups after an upstream change made id string-typed and some nested fields optional. Update the ingest and normalization steps to handle schema drift (type coercion, defaulting missing nested fields, dropping unknown columns) and emit a Parquet file that conforms to the provided JSON Schema.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Data Format & Schema Mismatches', 'Diagnose a Spark job that crashes when reading a partitioned Parquet dataset because certain partitions were written with conflicting types for the same columns (e.g., id as int in some, string in others, differing decimal scales). Create a command-line repair tool that scans partitions, infers a unified schema, rewrites or casts offending files, and verifies the job completes with a stable row count.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Data Format & Schema Mismatches', 'Diagnose and fix a Python CSV-to-Parquet conversion script that crashes because different input shards use inconsistent schemas (missing columns, reordered headers, mixed numeric/string types, and dual date formats). Implement a normalization step that defines a canonical schema, coerces/validates types, fills defaults for absent fields, and produces a single readable Parquet dataset verified by a provided reader script.', 'hard', ARRAY['python']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Data Format & Schema Mismatches', 'Diagnose and fix a failing ETL step where a pandas CSV loader expects comma-delimited UTF-8 with headers id,event_time,amount, but input partitions are mixed: semicolon-delimited ISO-8859-1 with BOM, and some months rename amount to total_amount or omit it entirely. Implement robust delimiter/encoding detection, header alias mapping, and default value/backfill logic, then emit Parquet conforming to a provided schema and verify via a schema-validation script.', NULL, ARRAY['pandas']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Data Format & Schema Mismatches', 'Diagnose and fix a failing Python ETL that ingests NDJSON into a SQLite table where some shards emit objects missing required fields, integers as strings, or an array instead of an object. Implement a loader that validates against a provided JSON Schema, coerces types and fills defaults, quarantines irreparable records to /app/bad_rows.ndjson, and completes the load without errors.', 'hard', ARRAY['python']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'I/O & File Handling Errors', 'A log aggregation ETL that tails /var/log/app.log misses data after rotation and crashes on reading gzipped archives due to stale file handles and incorrect decompression. Diagnose and fix the pipeline to detect log rotation (reopen on inode change), read both .log and .log.*.gz with correct permissions, and emit a complete deduplicated JSONL to /app/out.jsonl for a target date.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'I/O & File Handling Errors', 'Debug a Python ETL that merges CSVs from input/ into a single Parquet but crashes with UnicodeDecodeError and FileNotFoundError because it assumes UTF-8 and only matches *.csv while some inputs are .csv.gz and Windows-1252 or UTF-8-BOM encoded. Implement robust file discovery and decoding (support .csv/.csv.gz, handle BOM and cp1252 fallback) and ensure the output writes to out/ with proper permissions, then rerun to pass row-count and schema checks.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'I/O & File Handling Errors', 'Diagnose and fix a Python log ETL that hangs or fails with UnicodeDecodeError when consuming gzipped records from a named pipe and rotating .gz files because it treats FIFOs like regular files, seeks on non-seekable streams, and assumes UTF-8. Make the reader stream-safe, BOM/encoding-aware, and tolerant of concatenated/partial gzip members, then verify it emits a single UTF-8, LF-normalized output.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'I/O & File Handling Errors', 'Diagnose and fix a file-descriptor leak in a Python ETL that globs and processes thousands of (optionally gzipped) JSON Lines files, causing intermittent ''Too many open files'' errors. Refactor to use context managers and bounded concurrency, then verify the full dataset ingests without EMFILE failures.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'I/O & File Handling Errors', 'Diagnose why a JSONL merge ETL script silently skips inputs and corrupts records when traversing a directory tree containing spaces/newlines in filenames, symlinks, and mixed UTF-8/Latin-1 encodings. Repair the script to robustly discover files and handle .jsonl and .jsonl.gz, safely read/normalize encodings, and write a single deduplicated UTF-8 newline-delimited output to /app/merged.jsonl.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Pipeline Stage Failures', 'Debug a GNU Make–driven ETL where a CSV→JSON→SQLite pipeline intermittently fails because a normalization step writes to a .tmp file and downstream rules consume stale outputs due to misdeclared targets and misordered prerequisites. Fix the Makefile by declaring correct outputs, ordering dependencies (including any order-only deps), and verify that a full run and incremental rebuilds execute the correct stages end-to-end.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Pipeline Stage Failures', 'Debug a Snakemake ETL where a normalization step writes gzipped CSVs while declaring .csv outputs, causing downstream aggregation to miss inputs and the DAG to misorder. Fix the rule I/O patterns, compression settings, and dependencies so the pipeline runs end-to-end and emits the expected final summary.csv.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Pipeline Stage Failures', 'Debug a broken Snakemake-based ETL where a mid-pipeline ''normalize -> join -> partition'' stage fails because the normalize step emits NDJSON while the join expects a JSON array and sometimes runs before normalize completes. Identify and fix misdeclared dependencies and the schema mismatch so the pipeline orders correctly and the final partitioned Parquet output passes a row-count validation.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Pipeline Stage Failures', 'Diagnose a Snakemake ETL where a mid-pipeline rule now outputs gzipped TSV files while downstream rules still expect plain TSV, leading to a no-op aggregation and an empty final report. Align I/O patterns and shell commands across affected rules, rebuild the DAG, and verify the corrected output.', NULL, NULL),
('Debugging & Troubleshooting', 'Data & Pipeline Debugging', 'Pipeline Stage Failures', 'Diagnose and fix a Snakemake data pipeline where a mid-stage rule fails because its declared outputs don’t match the files written by the upstream step (gzip enabled, wrong suffix and temp directory), causing MissingOutputException. Align input/output patterns and compression flags, add any missing dependencies, and run the workflow end-to-end to produce /app/out/summary.csv.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Build Configuration & Toolchain Issues', 'Diagnose a CMake project whose shared plugin fails to link and cannot be loaded at runtime due to missing -fPIC objects and incorrect RPATH/SONAME. Update CMakeLists.txt to enable POSITION_INDEPENDENT_CODE, correct link order, and set a proper INSTALL_RPATH so the host executable can dlopen the plugin and pass the provided test.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Build Configuration & Toolchain Issues', 'Diagnose a CMake-based C++ project that fails to link on a clean environment due to missing transitive dependencies and non-PIC objects in a shared library. Fix CMakeLists.txt to use imported targets with correct PUBLIC/INTERFACE scopes and enable POSITION_INDEPENDENT_CODE, then rebuild and verify by running the provided demo binary.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Build Configuration & Toolchain Issues', 'Diagnose and fix a CMake project that fails to build a shared plugin because a bundled static library is compiled without position-independent code, causing relocation errors at link time. Update the build to ensure all static libraries linked into shared targets are built with -fPIC (e.g., setting POSITION_INDEPENDENT_CODE and propagating flags) and verify the plugin builds and loads with a small test program.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Build Configuration & Toolchain Issues', 'Diagnose and repair a CMake-based C++ project that fails to link a shared library due to non-PIC static dependencies and whose test binary cannot locate the built .so at runtime. Modify CMake to build static libs with POSITION_INDEPENDENT_CODE and set correct RPATH/INSTALL_RPATH so the library links and the tests execute successfully.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Build Configuration & Toolchain Issues', 'Fix a CMake-based C++ project that fails to build shared libraries due to missing -fPIC and unresolved OpenMP symbols when using Clang. Diagnose the errors and update the CMake configuration to enable position independent code and link the correct OpenMP runtime so the project compiles and tests run successfully.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Package Installation Failures', 'Diagnose and fix an npm install failure for the sharp image library where native module build via node-gyp breaks due to missing toolchain and system libraries or incompatible Node ABI/prebuilt binaries. Install the necessary build tools and libvips (or align Node version so prebuilt binaries work), then verify by running a Node script that loads sharp and successfully resizes an image.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Package Installation Failures', 'Diagnose and fix why pip install lxml fails due to missing system headers and build tools (libxml2/libxslt, zlib, compiler). After repair, install lxml successfully and verify by running a provided test script that parses XML without errors.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Package Installation Failures', 'Diagnose and repair a failing npm install of node-canvas that errors with node-gyp and missing libcairo/Pango headers by installing the correct system build tools and configuring pkg-config (and, if necessary, pinning to a compatible Node ABI). Verify the fix by successfully installing the package and rendering a PNG to /app/out.png using a provided test script.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Package Installation Failures', 'Diagnose and repair a pip install failure for pygraphviz on a minimal Linux image where the build cannot locate Graphviz headers/libraries. Install the required system packages and set appropriate env vars so the wheel builds, then verify by generating a PNG from a simple graph.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Package Installation Failures', 'In an Alpine Linux container, diagnose and fix pip install cryptography failing by installing the Rust toolchain and OpenSSL/musl development headers, and configuring the build environment so a source build succeeds. Verify by importing cryptography and generating an Ed25519 keypair in a short Python script.', NULL, ARRAY['container', 'cryptography', 'rust', 'python']),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'System Library & Path Errors', 'Diagnose a Python + GDAL/PROJ setup where importing osgeo.gdal fails with a libgdal.so load error or missing grid files because the shared libraries and data directories aren’t on the search path. Fix by correctly wiring PATH/LD_LIBRARY_PATH/PKG_CONFIG_PATH and GDAL_DATA/PROJ_LIB (or adding an rpath) and verify by importing GDAL and performing a coordinate transform.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'System Library & Path Errors', 'Diagnose and fix a prebuilt CLI in /app/bin/remote-sync that fails with ''error while loading shared libraries: libssl.so.1.1'' due to an OpenSSL ABI mismatch. Provide a compatible libssl/libcrypto and configure the dynamic linker (e.g., rpath/LD_LIBRARY_PATH or ldconfig) so ldd resolves all libraries and the CLI completes its test run.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'System Library & Path Errors', 'Diagnose and repair a Pillow import failure caused by a missing or mislinked system libjpeg (e.g., ''libjpeg.so.X: cannot open shared object file''). Install or relink the correct library and rebuild or reinstall Pillow, then verify JPEG load/save works in a short script.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'System Library & Path Errors', 'Diagnose and repair a prebuilt ELF CLI in /app/bin that fails with ''error while loading shared libraries: libfoo.so.X: cannot open shared object file'' due to a missing or misconfigured runtime library search path. Locate the correct library directory and fix the binary via RPATH (patchelf) or environment (LD_LIBRARY_PATH) so the tool executes a provided command successfully.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'System Library & Path Errors', 'Diagnose why the prebuilt CLI at /app/bin/tool fails to start with missing libssl/libstdc++ errors due to ABI/version mismatches and incorrect library search paths. Repair by vendoring compatible shared libraries and fixing the loader path (RPATH/RUNPATH or LD_LIBRARY_PATH via patchelf or a wrapper) so the tool runs and its self-test completes successfully.', NULL, NULL),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Version Incompatibility', 'Diagnose a Node.js project that fails with a ''module was compiled against a different Node-API/ABI'' error due to a mismatch between the installed Node version and native addon binaries (e.g., sharp/sqlite3). Align versions by switching Node via nvm/asdf or rebuilding addons, then verify the app runs a provided command successfully.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Version Incompatibility', 'Diagnose a Rust workspace that fails to build because the pinned dependencies require a newer Rust toolchain/edition than the installed rustc and cargo. Resolve by activating a compatible toolchain (e.g., via rustup or a directory override) or re-resolving to compatible crate versions, then build and run the tests successfully.', NULL, ARRAY['rust']),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Version Incompatibility', 'Diagnose and fix a Node.js TypeScript project where builds/tests fail under Node 20 due to incompatible versions of TypeScript, ts-node/ts-jest, and Jest (ESM/CJS loader and peer-dependency errors). Align and pin a compatible toolchain or update configs for ESM/CJS correctly, then verify npm run build and npm test succeed.', NULL, ARRAY['typescript']),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Version Incompatibility', 'Diagnose and fix a Node.js project that fails to start due to a native addon compiled for an incompatible Node-API/ABI (e.g., “Module version mismatch” or “Module did not self-register”). Align the Node.js/runtime version and rebuild the addons (or select a compatible prebuilt) so the program runs and the addon loads successfully.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Dependency & Build Troubleshooting', 'Version Incompatibility', 'Diagnose and fix a Rust project’s build failure where the openssl-sys crate is incompatible with the system OpenSSL version (e.g., libssl3 vs libssl1.1). Apply a minimal remedy (pin a compatible crate version, install matching OpenSSL dev headers, or enable the vendored feature), then rebuild and verify the binary performs a successful HTTPS request.', NULL, ARRAY['rust']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Configuration File Parsing & Validation', 'Diagnose a failing Go HTTP service that crashes on startup due to a YAML configuration using anchors/aliases, merge keys (<<), and ${ENV} placeholders that its parser does not support. Normalize the config by materializing merges, expanding environment variables, fixing type mismatches against a provided JSON Schema, and verify the service boots and passes the health-check script.', NULL, NULL),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Configuration File Parsing & Validation', 'Diagnose and fix a CI pipeline failure caused by a YAML config that mixes tabs, YAML 1.1 booleans (on/off), merge keys/anchors, and unexpanded ${VAR} placeholders that the runner’s parser rejects. Normalize indentation, quote literals per YAML 1.2, inline merged sections, supply safe defaults for env placeholders, and verify with yamllint and a successful dry-run of the pipeline.', NULL, NULL),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Configuration File Parsing & Validation', 'Diagnose and fix a broken Docker Compose v2 YAML that misuses anchors/merge keys and ${VAR} interpolation, triggering schema/type errors on docker compose. Refactor to a valid v2 schema (e.g., via x- extension fields and correct quoting), supply a minimal .env, and verify with docker compose config and a successful service start.', NULL, ARRAY['docker']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Configuration File Parsing & Validation', 'Diagnose why Prometheus fails to start by fixing prometheus.yml and the referenced rules/*.yml: tabs, a UTF-8 BOM, inconsistent indentation, and a stringified numeric scrape_interval cause YAML parsing and schema validation errors. Normalize the files (no tabs/BOM), correct types and rule paths to satisfy the Prometheus schema, and verify with promtool check config and promtool check rules.', NULL, NULL),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Configuration File Parsing & Validation', 'Diagnose why a Prometheus server fails to start due to a malformed prometheus.yml (bad indentation, duplicate scrape_configs, and invalid relabel_configs). Fix the YAML so promtool check config passes and the server can start and scrape a bundled dummy target, verified by a successful GET of /-/ready.', NULL, NULL),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Cross-Platform Environment Differences', 'Diagnose a Python CLI project that runs on macOS/Windows but fails on Linux due to case-mismatched imports and CRLF-terminated helper scripts causing /bin/sh^M errors. Make it Linux-portable by correcting import/module casing and normalizing line endings and path handling, then verify the CLI executes successfully end-to-end.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Cross-Platform Environment Differences', 'Diagnose a Python CLI that crashes with UnicodeEncodeError on Linux but works on macOS due to running under the C/POSIX locale. Generate and set a UTF-8 locale in the container (e.g., en_US.UTF-8), update startup config to export LANG/LC_ALL, and verify it correctly processes non-ASCII filenames.', NULL, ARRAY['python', 'container']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Cross-Platform Environment Differences', 'Diagnose why a Node.js project that builds on Windows/macOS fails in the Linux container due to CRLF shebangs, case-insensitive import paths, and Windows-only path separators in package scripts, and make it fully portable. Verify by normalizing line endings, fixing import path casing, updating scripts to cross-platform commands, and ensuring npm ci && npm run build && npm test complete successfully in the container.', NULL, ARRAY['container']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Cross-Platform Environment Differences', 'Diagnose why project entrypoint scripts run on Windows/macOS but fail in Linux containers with errors like ''/usr/bin/env: python\r: No such file or directory'' or ''Permission denied''. Normalize line endings to LF, fix shebangs, set executable bits, and add .gitattributes rules to enforce cross-platform-safe endings, then verify the scripts execute successfully.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Cross-Platform Environment Differences', 'Investigate a Python CLI project that works on Windows but fails on Linux with a python^M shebang error and a ModuleNotFoundError from a case-mismatched import. Fix by converting CRLF to LF, correcting import/file casing, and adding .gitattributes rules to enforce LF line endings and case-consistent paths.', NULL, ARRAY['python']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Environment Variable Misconfiguration', 'A Node.js Express app crashes at startup with ''Missing ENV: DATABASE_URL, JWT_SECRET'' even though a .env file exists. Diagnose why environment variables are not loaded in the containerized runtime, load or export them correctly so the app starts, and verify the /health endpoint returns 200.', NULL, NULL),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Environment Variable Misconfiguration', 'A local API test suite times out because HTTP_PROXY/HTTPS_PROXY force localhost traffic through an external proxy and NO_PROXY is misconfigured. Diagnose and fix the proxy-related environment variables (including IPv4/IPv6 loopbacks and custom ports) so requests reach the local service and the test script completes successfully.', NULL, ARRAY['api']),
('Debugging & Troubleshooting', 'Environment & Configuration Debugging', 'Environment Variable Misconfiguration', 'Diagnose and fix a CLI application’s UnicodeDecodeError caused by running under the POSIX C locale with LANG/LC_* unset or misconfigured. Configure and activate a UTF-8 locale and appropriate environment variables so the program can read and print UTF-8 (including emojis) without errors.', NULL, NULL);
